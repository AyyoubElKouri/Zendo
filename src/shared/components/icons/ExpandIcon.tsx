/*--------------------------------------------------------------------------------------------------
 *                       Copyright (c) Ayyoub EL Kouri. All rights reserved
 *     Becoming an expert won’t happen overnight, but with a bit of patience, you’ll get there
 *------------------------------------------------------------------------------------------------*/

import { useEffect, useState } from "react";
import { Button } from "@headlessui/react";

export function ExpandIcon() {
	const [_isMaximized, setIsMaximized] = useState(false);

	useEffect(() => {
		// Vérifier l'état initial
		if (window.electronAPI?.isWindowMaximized) {
			window.electronAPI.isWindowMaximized().then(setIsMaximized);
		}

		// Écouter les changements d'état
		if (window.electronAPI?.onWindowMaximized) {
			window.electronAPI.onWindowMaximized(() => setIsMaximized(true));
		}
		if (window.electronAPI?.onWindowUnmaximized) {
			window.electronAPI.onWindowUnmaximized(() => setIsMaximized(false));
		}
	}, []);

	const handleClick = () => {
		if (window.electronAPI?.maximizeWindow) {
			window.electronAPI.maximizeWindow();
		}
	};

	return (
		<Button onClick={handleClick}>
			<svg width="26" height="26" viewBox="0 0 26 26" fill="none" className="active:scale-90">
				<title>Expand Icon</title>
				<rect x="1" y="1" width="24" height="24" rx="12" fill="#171717" />
				<rect
					x="0.5"
					y="0.5"
					width="25"
					height="25"
					rx="12.5"
					stroke="white"
					stroke-opacity="0.1"
				/>
				<path
					d="M11.6739 13.2251L10.0347 14.8685C9.99532 14.9081 9.94514 14.9351 9.89044 14.9462C9.83575 14.9574 9.77898 14.9521 9.72728 14.9311C9.67557 14.91 9.63124 14.8742 9.59981 14.8281C9.56838 14.7819 9.55128 14.7275 9.55063 14.6717V14.2328C9.55063 14.0271 9.46895 13.8299 9.32355 13.6845C9.17815 13.539 8.98095 13.4573 8.77532 13.4573C8.56969 13.4573 8.37249 13.539 8.22709 13.6845C8.08169 13.8299 8 14.0271 8 14.2328V17.2245C8.00305 17.4292 8.08571 17.6247 8.23046 17.7695C8.3752 17.9143 8.57064 17.9969 8.77532 18H11.7664C11.972 18 12.1692 17.9183 12.3146 17.7729C12.46 17.6274 12.5417 17.4302 12.5417 17.2245C12.5417 17.0188 12.46 16.8216 12.3146 16.6762C12.1692 16.5307 11.972 16.449 11.7664 16.449H11.3256C11.2698 16.4484 11.2154 16.4313 11.1693 16.3999C11.1232 16.3684 11.0873 16.3241 11.0663 16.2724C11.0453 16.2206 11.04 16.1639 11.0512 16.1092C11.0623 16.0545 11.0893 16.0043 11.1288 15.9648L12.7739 14.3194C12.9187 14.1737 13 13.9767 13 13.7713C13 13.5658 12.9187 13.3688 12.7739 13.2231C12.6266 13.0797 12.4291 12.9996 12.2235 13C12.018 13.0004 11.8207 13.0811 11.6739 13.2251Z"
					fill="white"
				/>
				<path
					d="M17.23 8H14.2385C14.1367 8 14.036 8.02004 13.942 8.05899C13.8479 8.09793 13.7625 8.15501 13.6906 8.22697C13.6186 8.29892 13.5615 8.38435 13.5226 8.47837C13.4836 8.57239 13.4636 8.67315 13.4636 8.77492C13.4636 8.87668 13.4836 8.97745 13.5226 9.07146C13.5615 9.16548 13.6186 9.25091 13.6906 9.32286C13.7625 9.39482 13.8479 9.45191 13.942 9.49085C14.036 9.52979 14.1367 9.54983 14.2385 9.54983H14.6751C14.7305 9.55084 14.7844 9.56807 14.8301 9.59938C14.8758 9.63067 14.9113 9.67469 14.9322 9.72598C14.9531 9.77725 14.9586 9.83354 14.9479 9.88789C14.9371 9.94223 14.9107 9.99222 14.8718 10.0317L13.2276 11.6759C13.0821 11.8212 13.0002 12.0183 13 12.224C12.9998 12.4296 13.0813 12.6269 13.2266 12.7724C13.3719 12.9179 13.569 12.9998 13.7746 13C13.9803 13.0002 14.1776 12.9187 14.3231 12.7734L15.9673 11.1292C16.0067 11.0897 16.0569 11.0626 16.1115 11.0515C16.1662 11.0404 16.2229 11.0457 16.2746 11.0667C16.3263 11.0877 16.3706 11.1235 16.402 11.1696C16.4334 11.2157 16.4505 11.2701 16.4512 11.3258V11.7684C16.4459 11.8733 16.462 11.9782 16.4985 12.0767C16.535 12.1752 16.5911 12.2652 16.6635 12.3414C16.7359 12.4175 16.823 12.4781 16.9195 12.5195C17.0161 12.561 17.12 12.5823 17.2251 12.5823C17.3302 12.5823 17.4341 12.561 17.5306 12.5195C17.6272 12.4781 17.7143 12.4175 17.7867 12.3414C17.8591 12.2652 17.9152 12.1752 17.9517 12.0767C17.9882 11.9782 18.0043 11.8733 17.999 11.7684V8.77492C17.9995 8.57026 17.9189 8.37374 17.7747 8.22847C17.6306 8.08321 17.4347 8.00104 17.23 8Z"
					fill="white"
				/>
			</svg>
		</Button>
	);
}
